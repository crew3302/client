# ğŸš€ Deploy Pronote Backend to Render.com

## âœ… Prerequisites
- GitHub repository already pushed: `crew3302/client` âœ…
- `render.yaml` configuration ready âœ…
- All environment variables documented âœ…

## ğŸ“‹ Step-by-Step Deployment Guide

### Step 1: Access Render Dashboard
1. Go to: **https://render.com**
2. **Sign in** or **Sign up** (free account works fine)
3. Connect your **GitHub account** if not already connected

### Step 2: Create New Blueprint
1. Click **"New +"** button (top right)
2. Select **"Blueprint"**
3. Connect to GitHub repository: **`crew3302/client`**
4. Render will **auto-detect** the `render.yaml` file
5. Click **"Apply"**

### Step 3: Configure Environment Variables
Render will prompt you to add the environment variables. 

**IMPORTANT**: Use the values from your `backend/.env` file. Here are the required variables:

```env
# Database
SUPABASE_URL=<your-supabase-url>
SUPABASE_SERVICE_ROLE_KEY=<your-supabase-service-role-key>

# OpenAI
OPENAI_API_KEY=<your-openai-api-key>

# Stripe
STRIPE_SECRET_KEY=<your-stripe-secret-key>
STRIPE_INDIVIDUAL_ANNUAL_PRICE_ID=<your-individual-annual-price-id>
STRIPE_GROUP_MONTHLY_PRICE_ID=<your-group-monthly-price-id>
STRIPE_GROUP_ANNUAL_PRICE_ID=<your-group-annual-price-id>

# PayPal
PAYPAL_CLIENT_ID=<your-paypal-client-id>
PAYPAL_CLIENT_SECRET=<your-paypal-client-secret>

# Frontend (Update after deployment)
FRONTEND_URL=https://frontend-lilac-three-26.vercel.app
```

**ğŸ’¡ TIP**: Open your `backend/.env` file and copy each value directly. All these variables are already configured and working in Vercel.

**Note**: JWT_SECRET will be auto-generated by Render (already configured in render.yaml)

### Step 4: Deploy
1. Click **"Create Web Service"**
2. Render will start building and deploying
3. Wait 3-5 minutes for build to complete
4. You'll get a URL like: `https://pronote-backend.onrender.com`

### Step 5: Update Frontend Environment Variable
1. Go back to **Vercel dashboard**
2. Update `VITE_API_URL` to your new Render backend URL
3. Redeploy frontend

## âš¡ Quick Deploy Commands

If you prefer, you can also use Render's manual deployment:

1. **Option A: Blueprint (Recommended)**
   - Uses render.yaml
   - Automatically configures everything
   - Just add environment variables

2. **Option B: Manual Web Service**
   - Create new Web Service
   - Connect GitHub repo
   - Set build command: `cd backend && npm install && npm run build`
   - Set start command: `cd backend && npm start`
   - Add all environment variables manually

## ğŸ” Post-Deployment Verification

After deployment, test these endpoints:

```bash
# Health check
curl https://your-app.onrender.com/health

# Expected response:
# {"status":"ok","timestamp":"2026-02-11T..."}

# API endpoint (should require auth)
curl https://your-app.onrender.com/api/subscriptions/plans

# Expected response:
# {"error":"No token provided"}
```

## ğŸ’¡ Render Free Tier Notes

- âœ… Free tier available
- âš ï¸ Service spins down after 15 minutes of inactivity
- âš ï¸ First request after inactivity takes ~30 seconds (cold start)
- âœ… No credit card required for free tier
- âœ… Automatic HTTPS
- âœ… Custom domains supported

## ğŸ†š Render vs Vercel Comparison

**Render Advantages:**
- Better for Node.js long-running processes
- No complicated Node.js version issues
- Traditional server deployment (easier to debug)
- Better logs and monitoring on free tier

**Vercel Advantages:**
- Faster cold starts (serverless)
- Better for static sites and APIs
- Automatic preview deployments

## ğŸ”§ Troubleshooting

**Build fails:**
- Check that `backend/package.json` has correct build script
- Verify Node.js version compatibility (render.yaml uses default)

**Service crashes:**
- Check Render logs in dashboard
- Verify all environment variables are set
- Ensure PORT is not hardcoded (Render provides it)

**Cannot connect to frontend:**
- Update FRONTEND_URL in Render dashboard
- Add CORS origin in backend if needed
- Check Render service URL is correct

## ğŸ“ Support

- Render Docs: https://render.com/docs
- Render Status: https://status.render.com
- Community: https://community.render.com

---

**Ready to deploy?** Follow the steps above and your backend will be live on Render in minutes!
